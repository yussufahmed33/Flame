<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Register</title>
    <style>
        body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f8fafc;margin:0}
        .wrap{max-width:640px;margin:2rem auto;padding:1.5rem;background:#fff;border:1px solid #e5e7eb;border-radius:8px}
        h1{margin:0 0 1rem 0;font-size:1.5rem;color:#111827}
        .grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
        .field{margin:.6rem 0}
        label{display:block;font-size:.85rem;color:#374151;margin-bottom:.25rem}
        input{width:100%;padding:.65rem;border:1px solid #d1d5db;border-radius:6px;font-size:.95rem}
        .full{grid-column:1 / -1}
        button{width:100%;padding:.8rem;border:0;background:#111827;color:#fff;border-radius:6px;cursor:pointer;margin-top:.5rem}
        .msg{margin:.5rem 0;padding:.6rem;border-radius:6px;font-size:.875rem}
        .err{background:#fee2e2;color:#991b1b}
        .hint{margin-top:.75rem;text-align:center;font-size:.875rem}
        .ar{direction:rtl;text-align:right}
        @media (max-width:720px){.grid{grid-template-columns:1fr}}
    </style>
    <script>
        function togglePw() {
            const i = document.getElementById('pw');
            i.type = i.type === 'password' ? 'text' : 'password';
        }
    </script>
</head>
<body>
<div class="wrap">
    <h1>Register / إنشاء حساب</h1>

    <div th:if="${usernameTaken}" class="msg err">Username already taken. / اسم المستخدم محجوز.</div>
    <div th:if="${emailTaken}" class="msg err">Email already in use. / البريد الإلكتروني مستخدم.</div>

    <form method="post" th:action="@{/register}" th:object="${user}">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <div class="grid">
            <div class="field">
                <label>First name / الاسم الأول</label>
                <input type="text" th:field="*{firstName}" required />
            </div>
            <div class="field">
                <label>Last name / اسم العائلة</label>
                <input type="text" th:field="*{lastName}" required />
            </div>
            <div class="field">
                <label>Username / اسم المستخدم</label>
                <input type="text" th:field="*{username}" required />
            </div>
            <div class="field">
                <label>Email / البريد الإلكتروني</label>
                <input type="email" th:field="*{email}" required />
            </div>
            <div class="field">
                <label>Phone / الهاتف</label>
                <input type="text" th:field="*{phone}" required />
            </div>
            <div class="field">
                <label>Address / العنوان</label>
                <input type="text" th:field="*{address}" required />
            </div>
            <div class="field full">
                <label>Password / كلمة المرور</label>
                <input id="pw" type="password" th:field="*{password}" required />
                <div style="margin-top:.4rem;">
                    <label style="font-size:.85rem;"><input type="checkbox" onclick="togglePw()"> Show password / إظهار كلمة المرور</label>
                </div>
            </div>
        </div>

        <button type="submit">Create account / إنشاء حساب</button>
    </form>

    <div class="hint">Already have an account? <a th:href="@{/login}">Login</a> / لديك حساب؟ <a th:href="@{/login}">دخول</a></div>
</div>
</body>
</html>