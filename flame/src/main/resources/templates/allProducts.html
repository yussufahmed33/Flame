<!DOCTYPE html><html lang="en" xmlns:th="http://www.thymeleaf.org"><head>
    <meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><title>Products</title>
    <style>
        body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f8fafc;margin:0}
        .wrap{max-width:1000px;margin:2rem auto;background:#fff;border:1px solid #e5e7eb;border-radius:10px;padding:1rem}
        h1{margin:0 0 1rem 0}.bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
        table{width:100%;border-collapse:collapse} th,td{padding:.75rem;border-bottom:1px solid #e5e7eb;text-align:left}
        img{width:64px;height:64px;object-fit:cover;border-radius:6px}
        .ok{margin:.5rem 0;padding:.6rem;border-radius:6px;background:#dcfce7;color:#166534}
        .actions{display:flex;gap:.5rem}
        a.btn,button.btn{padding:.45rem .7rem;border-radius:6px;border:1px solid #d1d5db;background:#fff;cursor:pointer}
        a.primary{background:#111827;color:#fff;border-color:#111827;text-decoration:none}
    </style></head><body><div class="wrap">
    <div th:if="${updated}" class="ok">Updated / تم التعديل</div>
    <div th:if="${deleted}" class="ok">Deleted / تم الحذف</div>
    <div class="bar">
        <h1>All Products / كل المنتجات</h1>
        <a class="btn primary" th:href="@{/products/new}">Add Product / إضافة منتج</a>
    </div>
    <table>
        <thead><tr>
            <th>Image / صورة</th><th>Name / الاسم</th><th>Category / الفئة</th><th>Price / السعر</th><th>Actions / إجراءات</th>
        </tr></thead>
        <tbody>
        <tr th:each="p : ${products}">
            <td><img  th:src="@{'/' + ${p.image}}" alt="img"/>
<!--                     onerror="this.src='/placeholder.svg'"-->
            </td>
            <td th:text="${p.name}">Name</td>
            <td th:text="${p.category}">Category</td>
            <td th:text="${'E£ ' + #numbers.formatDecimal(p.price,1,2)}">E£0.00</td>
            <td class="actions">
                <a class="btn" th:href="@{|/products/${p.id}/edit|}">Edit / تعديل</a>
                <form th:action="@{|/products/${p.id}/delete|}" method="post" onsubmit="return confirm('Delete? / حذف؟')">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button class="btn" type="submit">Delete / حذف</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div></body></html>